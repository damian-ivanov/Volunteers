@model Volunteers.Models.Projects.ProjectDetailViewModel

@{
    ViewData["Title"] = "Project details";
}

<div class="container">
    <div class="row">
        <div class="col-md-5">
            <div class="project-info-box mt-0">
                <h5>@Model.Title</h5>
                <p class="mb-0">@Model.Description</p><hr />
            </div><!-- / project-info-box -->
            <div class="project-info-box">
                <p><b>Where:</b> @Model.City, @Model.Address</p>
                <p><b>When:</b> @Model.StartDate</p>
                <p><b>Votes:</b> @Model.Votes</p>
                <p><b>Submitted by:</b> @Model.OwnerName</p>
            </div><!-- / project-info-box -->

            <div class="project-info-box mt-0 mb-0">
                <p class="mb-0">
                    <span class="fw-bold mr-10 va-middle hide-mobile">Vote:</span>
                    <a type="button" class="badge badge-pill badge-success" asp-action="Vote" asp-route-id="@Model.Id">Vote</a>
                    <a href="#x" class="btn btn-xs btn-facebook btn-circle btn-icon mr-5 mb-0"><i class="fab fa-facebook-f"></i></a>
                    <a href="#x" class="btn btn-xs btn-twitter btn-circle btn-icon mr-5 mb-0"><i class="fab fa-twitter"></i></a>
                    <a href="#x" class="btn btn-xs btn-pinterest btn-circle btn-icon mr-5 mb-0"><i class="fab fa-pinterest"></i></a>
                    <a href="#x" class="btn btn-xs btn-linkedin btn-circle btn-icon mr-5 mb-0"><i class="fab fa-linkedin-in"></i></a>
                </p>
            </div><!-- / project-info-box -->
        </div><!-- / column -->

        <div class="col-md-7">
            <img src="@Model.Image" alt="project-image" class="rounded">
            <div class="project-info-box">
                <p><b>Category:</b> @Model.Category</p>
                @if (User.IsInRole("Administrator"))
                {
            <p>
                @if (!Model.IsPublic)
                {
                    <a type="button" class="btn btn-success" asp-action="Approve" asp-route-id="@Model.Id">Approve</a>
                }
                @if (Model.IsPublic)
                {
                    <a type="button" class="btn btn-warning" asp-action="Hide" asp-route-id="@Model.Id">Hide</a>
                }
                @if (Model.IsCompleted)
                {
                    <a type="button" class="btn btn-secondary" asp-action="Activate" asp-route-id="@Model.Id">Mark as Active</a>
                }
                @if (!Model.IsCompleted)
                {
                    <a type="button" class="btn btn-secondary" asp-action="Complete" asp-route-id="@Model.Id">Mark as completed</a>
                }
            </p>
                 }
                    

                    @if (Model.IsOwner || User.IsInRole("Administrator"))
                    {
                        <a type="button" class="btn btn-info" asp-action="Edit" asp-route-id="@Model.Id">Edit</a>
                        <a type="button" class="btn btn-danger" asp-action="Delete" asp-route-id="@Model.Id">Delete</a>
                    }




                </div><!-- / project-info-box -->

                <div class="col-md-7">
                    @if (Model.Comments.Count == 0)
                    {
                        <h4>No comments added yet.</h4>
                    }

                    @if (Model.Comments.Count() > 0)
                    {
                        @foreach (var comment in Model.Comments)
                        {
                            <h5>@comment.Content</h5>
                            <h6>Author: @comment.User.Email</h6>
                        }
                    }
                    <a type="button" class="btn btn-success" asp-controller="Comment" asp-action="Add" asp-route-id="@Model.Id">Comment</a>
                </div>
            </div><!-- / column -->
        </div>
    </div>